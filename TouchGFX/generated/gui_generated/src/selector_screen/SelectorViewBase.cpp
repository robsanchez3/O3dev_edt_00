/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/selector_screen/SelectorViewBase.hpp>
#include <touchgfx/canvas_widget_renderer/CanvasWidgetRenderer.hpp>
#include <touchgfx/Color.hpp>
#include <images/BitmapDatabase.hpp>
#include <texts/TextKeysAndLanguages.hpp>

SelectorViewBase::SelectorViewBase() :
    updateItemCallback(this, &SelectorViewBase::updateItemCallbackHandler),
    buttonCallback(this, &SelectorViewBase::buttonCallbackHandler),
    sliderValueChangedCallback(this, &SelectorViewBase::sliderValueChangedCallbackHandler)
{
    touchgfx::CanvasWidgetRenderer::setupBuffer(canvasBuffer, CANVAS_BUFFER_SIZE);
    
    __background.setPosition(0, 0, 800, 480);
    __background.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    add(__background);

    si_selectorPoint.setBitmap(touchgfx::Bitmap(BITMAP_SELECTORPOINT_04_ID));
    si_selectorPoint.setPosition(395, 340, 10, 10);
    si_selectorPoint.setScalingAlgorithm(touchgfx::ScalableImage::NEAREST_NEIGHBOR);
    si_selectorPoint.setAlpha(170);
    si_selectorPoint.setVisible(false);
    add(si_selectorPoint);

    si_modeIcon.setBitmap(touchgfx::Bitmap(BITMAP_CONTINUO_01_ID));
    si_modeIcon.setPosition(10, 10, 130, 130);
    si_modeIcon.setScalingAlgorithm(touchgfx::ScalableImage::BILINEAR_INTERPOLATION);
    add(si_modeIcon);

    si_magnitudeIcon.setBitmap(touchgfx::Bitmap(BITMAP_O3_00_ID));
    si_magnitudeIcon.setPosition(660, 10, 130, 130);
    si_magnitudeIcon.setScalingAlgorithm(touchgfx::ScalableImage::BILINEAR_INTERPOLATION);
    add(si_magnitudeIcon);

    sw_selector.setPosition(0, 180, 800, 159);
    sw_selector.setHorizontal(true);
    sw_selector.setCircular(true);
    sw_selector.setEasingEquation(touchgfx::EasingEquations::linearEaseInOut);
    sw_selector.setSwipeAcceleration(50);
    sw_selector.setDragAcceleration(10);
    sw_selector.setNumberOfItems(81);
    sw_selector.setSelectedItemOffset(370);
    sw_selector.setOvershootPercentage(0);
    sw_selector.setSelectedItemExtraSize(0, 0);
    sw_selector.setSelectedItemMargin(0, 0);
    sw_selector.setDrawableSize(60, 0);
    sw_selector.setDrawables(sw_selectorListItems, updateItemCallback,
    
                          sw_selectorSelectedListItems, updateItemCallback);
    sw_selector.animateToItem(40, 0);
    sw_selector.setVisible(false);
    add(sw_selector);

    sw_backBox.setPosition(0, 306, 800, 36);
    sw_backBox.setColor(touchgfx::Color::getColorFromRGB(74, 127, 207));
    sw_backBox.setAlpha(150);
    sw_backBox.setVisible(false);
    add(sw_backBox);

    cp_iniDelay.setXY(300, 135);
    cp_iniDelay.setProgressIndicatorPosition(0, 0, 200, 200);
    cp_iniDelay.setRange(0, 100);
    cp_iniDelay.setCenter(100, 100);
    cp_iniDelay.setRadius(100);
    cp_iniDelay.setLineWidth(0);
    cp_iniDelay.setStartEndAngle(0, 360);
    cp_iniDelay.setBackground(touchgfx::Bitmap(BITMAP_CIRCLE_IND_BG_FULL_01_ID));
    cp_iniDelayPainter.setBitmap(touchgfx::Bitmap(BITMAP_CIRCLE_IND_FILL_FULL_00_ID));
    cp_iniDelay.setPainter(cp_iniDelayPainter);
    cp_iniDelay.setValue(60);
    add(cp_iniDelay);

    ta_selection.setPosition(60, 126, 680, 178);
    ta_selection.setColor(touchgfx::Color::getColorFromRGB(74, 127, 207));
    ta_selection.setLinespacing(0);
    Unicode::snprintf(ta_selectionBuffer, TA_SELECTION_SIZE, "%s", touchgfx::TypedText(T___SINGLEUSE_X3ZS).getText());
    ta_selection.setWildcard(ta_selectionBuffer);
    ta_selection.setTypedText(touchgfx::TypedText(T___SINGLEUSE_GL4F));
    add(ta_selection);

    sw_shadow.setBitmap(touchgfx::Bitmap(BITMAP_SW_SAHDOW_100_00_00_ID));
    sw_shadow.setPosition(0, 304, 800, 40);
    sw_shadow.setScalingAlgorithm(touchgfx::ScalableImage::BILINEAR_INTERPOLATION);
    sw_shadow.setVisible(false);
    add(sw_shadow);

    bt_cancel.setXY(10, 370);
    bt_cancel.setBitmaps(touchgfx::Bitmap(BITMAP_CANCELBUTTON_01_A_ID), touchgfx::Bitmap(BITMAP_CANCELBUTTON_01_B_ID));
    bt_cancel.setAction(buttonCallback);
    add(bt_cancel);

    bt_OK.setXY(690, 370);
    bt_OK.setBitmaps(touchgfx::Bitmap(BITMAP_ENTERBUTTON_02_A_ID), touchgfx::Bitmap(BITMAP_ENTERBUTTON_02_B_ID));
    bt_OK.setAction(buttonCallback);
    add(bt_OK);

    ta_units.setPosition(158, 396, 484, 49);
    ta_units.setColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    ta_units.setLinespacing(0);
    Unicode::snprintf(ta_unitsBuffer, TA_UNITS_SIZE, "%s", touchgfx::TypedText(T___SINGLEUSE_M9J0).getText());
    ta_units.setWildcard(ta_unitsBuffer);
    ta_units.setTypedText(touchgfx::TypedText(T___SINGLEUSE_B755));
    add(ta_units);

    ta_second_selection.setPosition(150, 39, 500, 73);
    ta_second_selection.setColor(touchgfx::Color::getColorFromRGB(74, 127, 207));
    ta_second_selection.setLinespacing(0);
    Unicode::snprintf(ta_second_selectionBuffer, TA_SECOND_SELECTION_SIZE, "%s", touchgfx::TypedText(T___SINGLEUSE_LBKP).getText());
    ta_second_selection.setWildcard(ta_second_selectionBuffer);
    ta_second_selection.setTypedText(touchgfx::TypedText(T___SINGLEUSE_B5B0));
    add(ta_second_selection);

    sl_slider.setXY(20, 269);
    sl_slider.setBitmaps(touchgfx::Bitmap(BITMAP_SLIDER_BACK_760_6_ID), touchgfx::Bitmap(BITMAP_SLIDER_FILL_760_6_ID), touchgfx::Bitmap(BITMAP_SLIDER_DOT_30_90_ID));
    sl_slider.setupHorizontalSlider(0, 60, 18, 0, 730);
    sl_slider.setValueRange(0, 100);
    sl_slider.setValue(0);
    sl_slider.setNewValueCallback(sliderValueChangedCallback);
    add(sl_slider);

    bt_back.setXY(0, 207);
    bt_back.setBitmaps(touchgfx::Bitmap(BITMAP_ARROW_BACK_100_A_ID), touchgfx::Bitmap(BITMAP_ARROW_BACK_100_B_ID));
    bt_back.setDelay(12);
    bt_back.setInterval(15);
    bt_back.setAction(buttonCallback);
    add(bt_back);

    bt_forward.setXY(700, 207);
    bt_forward.setBitmaps(touchgfx::Bitmap(BITMAP_ARROW_FORWARD_100_A_ID), touchgfx::Bitmap(BITMAP_ARROW_FORWARD_100_B_ID));
    bt_forward.setDelay(12);
    bt_forward.setInterval(15);
    bt_forward.setAction(buttonCallback);
    add(bt_forward);

    lp_iniDelay.setXY(20, 327);
    lp_iniDelay.setProgressIndicatorPosition(0, 0, 760, 6);
    lp_iniDelay.setRange(0, 100);
    lp_iniDelay.setBackground(touchgfx::Bitmap(BITMAP_SLIDER_BACK_760_6_ID));
    lp_iniDelayPainter.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    lp_iniDelay.setPainter(lp_iniDelayPainter);
    lp_iniDelay.setStart(768, 3);
    lp_iniDelay.setEnd(0, 3);
    lp_iniDelay.setLineWidth(6);
    lp_iniDelay.setLineEndingStyle(touchgfx::Line::SQUARE_CAP_ENDING);
    lp_iniDelay.setValue(0);
    add(lp_iniDelay);
}

SelectorViewBase::~SelectorViewBase()
{
    touchgfx::CanvasWidgetRenderer::resetBuffer();
}

void SelectorViewBase::setupScreen()
{
    sw_selector.initialize();
    for (int i = 0; i < sw_selectorListItems.getNumberOfDrawables(); i++)
    {
        sw_selectorListItems[i].initialize();
    }
    for (int i = 0; i < sw_selectorSelectedListItems.getNumberOfDrawables(); i++)
    {
        sw_selectorSelectedListItems[i].initialize();
    }
}

void SelectorViewBase::buttonCallbackHandler(const touchgfx::AbstractButton& src)
{
    if (&src == &bt_OK)
    {
        //OkClicled
        //When bt_OK clicked call virtual function
        //Call okClicked
        okClicked();
    }
    if (&src == &bt_back)
    {
        //backClicked1
        //When bt_back clicked call virtual function
        //Call backClicked
        backClicked();
    }
    if (&src == &bt_forward)
    {
        //forwardClicked1
        //When bt_forward clicked call virtual function
        //Call forwardClicked
        forwardClicked();
    }
    if (&src == &bt_cancel)
    {
        //cancelClicked1
        //When bt_cancel clicked call virtual function
        //Call cancelClicked
        cancelClicked();
    }
}

void SelectorViewBase::sliderValueChangedCallbackHandler(const touchgfx::Slider& src, int value)
{
    if (&src == &sl_slider)
    {
        //sl_slider_changed1
        //When sl_slider value changed call virtual function
        //Call sl_slider_changed
        sl_slider_changed(value);
    }
}

void SelectorViewBase::updateItemCallbackHandler(touchgfx::DrawableListItemsInterface* items, int16_t containerIndex, int16_t itemIndex)
{
    if (items == &sw_selectorListItems)
    {
        touchgfx::Drawable* d = items->getDrawable(containerIndex);
        sw_selectContainer* cc = (sw_selectContainer*)d;
        sw_selectorUpdateItem(*cc, itemIndex);
    }
    if (items == &sw_selectorSelectedListItems)
    {
        touchgfx::Drawable* d = items->getDrawable(containerIndex);
        sw_selectionContainer* cc = (sw_selectionContainer*)d;
        sw_selectorUpdateCenterItem(*cc, itemIndex);
    }
}
